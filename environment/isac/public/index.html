

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Public Stage &mdash; Minecraft As a Service  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Hetzner" href="publisher/hetzner/index.html" />
    <link rel="prev" title="Lokale Entwicklung" href="../local/index.html" />
 


  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Minecraft As a Service
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../gameworld/index.html">Doku Spielwelt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../plugins/index.html">Doku Plugins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Doku Development/Maintenance</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Infrastructure as Code</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../local/index.html">Lokale Entwicklung</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Public Stage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#required">Required</a></li>
<li class="toctree-l4"><a class="reference internal" href="#konfiguration">Konfiguration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#infrastruktur">Infrastruktur</a></li>
<li class="toctree-l4"><a class="reference internal" href="#service-konfiguration">Service Konfiguration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#evaluierte-anbieter">Evaluierte Anbieter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools.html">Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../process/index.html">Prozess Abläufe</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Minecraft As a Service</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Doku Development/Maintenance</a> &raquo;</li>
        
          <li><a href="../index.html">Infrastructure as Code</a> &raquo;</li>
        
      <li>Public Stage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/environment/isac/public/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="public-stage">
<h1>Public Stage<a class="headerlink" href="#public-stage" title="Permalink to this headline">¶</a></h1>
<p>Für die vollständiges Einrichtung (<a class="reference internal" href="#ref-env-provision-infrastructure"><span class="std std-ref">Infrastruktur</span></a> &amp; <a class="reference internal" href="#ref-env-provision-service"><span class="std std-ref">Service Konfiguration</span></a>) der Produktiven Umgebung wird eine Kombination von <a class="reference internal" href="../tools.html#ref-env-process-terraform"><span class="std std-ref">Terraform</span></a> und <a class="reference internal" href="../tools.html#ref-env-process-ansible"><span class="std std-ref">Ansible</span></a> verwendet.</p>
<p>Die Terraform Scripte sind stark Cloud Anbieter spezifisch, und stellen die reine Infrastruktur bereit.
Mit Hilfe von Ansible wird das die eigentliche Instance verwaltet, Patch management, SSH Userverwaltung usw…
Ansible verwendet eine Kobination aus Dynamischen und Statischen inventory.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./provisioning
./setup-env.sh
</pre></div>
</div>
<div class="section" id="required">
<h2>Required<a class="headerlink" href="#required" title="Permalink to this headline">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>TF_VAR_private_access_pass_path
TF_VAR_machine_access_pass_path
PASSWORD_STORE_DIR
HCLOUD_TOKEN
</pre></div>
</div>
</div>
<div class="section" id="konfiguration">
<span id="ref-env-provision-prod-configuration"></span><h2>Konfiguration<a class="headerlink" href="#konfiguration" title="Permalink to this headline">¶</a></h2>
<p>Als Konfigurations Grundlage dient <code class="docutils literal notranslate"><span class="pre">provisioning/inventories/prod/group_vars/minecraftgameserver.yml</span></code></p>
</div>
<div class="section" id="infrastruktur">
<span id="ref-env-provision-infrastructure"></span><h2>Infrastruktur<a class="headerlink" href="#infrastruktur" title="Permalink to this headline">¶</a></h2>
<p>Als aktueller Betreiber der Infrastruktur wird <a class="reference internal" href="publisher/hetzner/index.html#ref-env-provider-hetzner"><span class="std std-ref">Hetzner</span></a> verwendet.</p>
<p>Bestandteile der Infrastruktur sind <code class="docutils literal notranslate"><span class="pre">voluems</span></code>, <code class="docutils literal notranslate"><span class="pre">ecs</span> <span class="pre">instances</span></code>, <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">project</span> <span class="pre">ssh</span> <span class="pre">keys</span></code> und <code class="docutils literal notranslate"><span class="pre">floating</span> <span class="pre">ip</span></code>.
Für die die verwaltung wird ein Terraform Provider verwendet, siehe <a class="reference internal" href="publisher/hetzner/index.html#ref-env-provider-hetzner-integration-terraform"><span class="std std-ref">Hetzner Provider</span></a>.
Die Terraform Scripte werden aufgrund des wunsches nach einem geziehlten Rollback und Destroy workflow in unterschiedliche scripte aufgeteilt.</p>
<div class="section" id="projekt-konfiguration">
<h3>Projekt Konfiguration<a class="headerlink" href="#projekt-konfiguration" title="Permalink to this headline">¶</a></h3>
<p>Allgemeine Projekt Konfigurationen werden unter <code class="docutils literal notranslate"><span class="pre">provisioning/infrastructure/hetzner_project</span></code> verwaltet, hierzu gehören z.B. die <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">project</span> <span class="pre">ssh</span> <span class="pre">keys</span></code>, für das initiale verbinden.</p>
</div>
<div class="section" id="server-hotstorage">
<h3>Server HotStorage<a class="headerlink" href="#server-hotstorage" title="Permalink to this headline">¶</a></h3>
<p>Der HotStorage Part (siehe <code class="docutils literal notranslate"><span class="pre">provisioning/infrastructure/hetzner_hotstorage</span></code>) regelt das verwalten von Kurzzeit Backups (<code class="docutils literal notranslate"><span class="pre">0,0476</span> <span class="pre">€/GB/Monat</span></code>).</p>
</div>
<div class="section" id="ecs-gameserver-instance">
<h3>ECS Gameserver Instance<a class="headerlink" href="#ecs-gameserver-instance" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="provision_infrstructure.html#ref-env-provision-infrastructure-details"><span class="std std-ref">The Infrastructure</span></a></p>
</div>
</div>
<div class="section" id="service-konfiguration">
<span id="ref-env-provision-service"></span><h2>Service Konfiguration<a class="headerlink" href="#service-konfiguration" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../../process/backups/index.html#ref-env-backup"><span class="std std-ref">Ablauf Backup Prozess</span></a></p>
<p><a class="reference external" href="https://www.digitalocean.com/community/tutorials/how-to-protect-ssh-with-fail2ban-on-centos-7">https://www.digitalocean.com/community/tutorials/how-to-protect-ssh-with-fail2ban-on-centos-7</a></p>
<p>Für die Ersteinrichtung wird ein Ansible Playbook verwendet,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>ansible-playbook provision-minecraft-master.yml -i ./inventories/prod
</pre></div>
</div>
<p>destroy</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>ansible-playbook -i inventories/prod infrastructure/ansible_playbook-destroy-infrastructure.yml
</pre></div>
</div>
</div>
<div class="section" id="evaluierte-anbieter">
<h2>Evaluierte Anbieter<a class="headerlink" href="#evaluierte-anbieter" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="publisher/hetzner/index.html">Hetzner</a></li>
<li class="toctree-l1"><a class="reference internal" href="publisher/nitrado/index.html">Nitrado</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="publisher/hetzner/index.html" class="btn btn-neutral float-right" title="Hetzner" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../local/index.html" class="btn btn-neutral" title="Lokale Entwicklung" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 


</body>
</html>